(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(64),s=a.n(r),l=(a(71),a(30)),i=a(15),c=a(16),u=a(18),m=a(17),p=a(19),h=a(65),d=a.n(h),b=a(47),g=a.n(b);g.a.initializeApp({apiKey:"AIzaSyB2bD8kgHnvlqYpPK9QERgE-hDleHBT9tk",authDomain:"one-word-246c8.firebaseapp.com",databaseURL:"https://one-word-246c8.firebaseio.com",projectId:"one-word-246c8",storageBucket:"one-word-246c8.appspot.com",messagingSenderId:"461388693078"});var f=g.a,v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){console.log(e),e.preventDefault(),a.props.poem[0]=a.state.poemTitle,a.props.poem.push("Author: "+a.state.poemAuthor),f.database().ref("poems").push(a.props.poem),a.setState({canSubmit:!1})},a.handleChange=function(e){a.setState(Object(l.a)({},e.target.name,e.target.value))},a.handleClick=function(){console.log("CLICKED")},a.state={poemTitle:"",poemAuthor:"",canSubmit:!0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.props.poem.length>1&&this.state.canSubmit?o.a.createElement("div",{className:"poemHolder"},o.a.createElement("ul",null,this.props.poem.map(function(e,t){return o.a.createElement("li",{key:t},e)})),o.a.createElement("form",{action:"submit",onSubmit:this.handleSubmit},o.a.createElement("label",{className:"visuallyHidden",htmlFor:""},"Add Title to Poem"),o.a.createElement("input",{id:"poemTitle",type:"text",placeholder:"Poem title:",onChange:this.handleChange,name:"poemTitle",value:this.state.poemTitle,required:!0}),o.a.createElement("input",{id:"poemAuthor",type:"text",placeholder:"Authors name:",onChange:this.handleChange,name:"poemAuthor",value:this.state.poemAuthor,required:!0}),o.a.createElement("button",{type:"submit",value:"save"},"Save poem")),o.a.createElement("button",{className:"tryAgain",onClick:this.handleClick},"Try again?")):o.a.createElement("h2",null))}}]),t}(n.Component),E=(a(145),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"poemCollection wrapper"},o.a.createElement("h1",null,"Poem Catalog"),this.props.poemList.map(function(e,t){var a="poem poem".concat(t);return o.a.createElement("ul",{key:e[0],className:a},e[1].map(function(e,t){return o.a.createElement("li",{key:t},e)}))}))}}]),t}(n.Component)),y=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).getPoems=function(){var t=e.state.searchWord.trim().toLocaleLowerCase();if(t.length>2){if(!0===/\s/g.test(t))return e.setState({userMessage:"Please enter only one word",userPoem:[],badInput:!0}),"Please enter only one word";if(null!==/[^A-Za-z0-9]/.exec(t))return e.setState({userMessage:"No special characters please",userPoem:[],badInput:!0}),"No special characters please";e.setState({isLoading:!0}),d()({method:"GET",url:"https://proxy.hackeryou.com",dataResponse:"json",params:{reqUrl:"http://poetrydb.org/lines/".concat(t,"/lines.json")},xmlToJSON:!1}).then(function(t){console.log(t);var a=t.data;if(404===a.status)return e.setState({isLoading:!1,searchWord:"",badInput:!0,userMessage:"Sorry no results try again?"}),"Sorry no results try again?";e.setState({badInput:!1});var n=[],o=[],r=["[Title]"],s=0,l=/[!@#$%^&*()_?:{}|<>[]/;a.forEach(function(t){t.lines.forEach(function(t){""!==t&&(l.exec(t)||(!0===t.includes(e.state.searchWord)?n.push(t):o.push(t)))})});for(var i=n.length,c=o.length,u=0;u<10;u++)0===u||9===u?(s=Math.floor(Math.random()*i),r.push(n[s].trim())):(s=Math.floor(Math.random()*c),r.push(o[s].trim()));e.setState({isLoading:!1,userPoem:r,searchWord:""})})}else console.log("Word must be at least three letters"),e.setState({userMessage:"Word must be at least three letters",userPoem:[],badInput:!0})},e.handleSubmit=function(t){t.preventDefault(),e.setState({newSubmit:!0}),e.getPoems()},e.handleChange=function(t){e.setState(Object(l.a)({},t.target.name,t.target.value))},e.state={searchWord:"",isLoading:!1,userPoem:[],dbPoems:[],userMessage:"",badInput:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.database().ref("poems").on("value",function(t){var a=t.val(),n=[];for(var o in a)n.push([o,a[o]]);e.setState({dbPoems:n})})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"wrapper"},o.a.createElement("h1",null,"A Single Word"),o.a.createElement("h2",{className:"appInfo"},"Enter a single word below. Using that word, we create a poem for you, using lines from the back catalog of classic poets."),this.state.isLoading?o.a.createElement("div",{className:"loadingScreen"},o.a.createElement("div",{className:"lds-ripple"},o.a.createElement("div",null),o.a.createElement("div",null))):o.a.createElement("form",{className:"inputForm",action:"submit",onSubmit:this.handleSubmit},o.a.createElement("label",{className:"visuallyHidden",htmlFor:"userInput"},"Enter word to generate poem"),o.a.createElement("input",{id:"userInput",type:"text",placeholder:"enter one word",onChange:this.handleChange,name:"searchWord",value:this.state.searchWord}),o.a.createElement("button",{type:"submit"},"get poem"),this.state.badInput?o.a.createElement("p",{className:"inputCheck"},this.state.userMessage):o.a.createElement("p",null))),o.a.createElement("main",{className:"wrapper"},o.a.createElement(v,{poem:this.state.userPoem}),o.a.createElement(E,{poemList:this.state.dbPoems})),o.a.createElement("footer",null,"Cian O'Ruanaidh \xa9 2019"))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},66:function(e,t,a){e.exports=a(146)},71:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.ddf385fd.chunk.js.map